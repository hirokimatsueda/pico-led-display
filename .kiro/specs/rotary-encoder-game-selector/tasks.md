# 実装計画

- [x] 1. ゲーム選択機能の基盤となるクラス構造を作成

  - 状態管理用の GameSelectorMode 列挙型を実装
  - 基本構造と初期化を含む GameSelector クラスを作成
  - _Requirements: 1.1, 1.2, 6.1_

- [x] 2. エンコーダー回転検出とゲーム選択モード移行機能を実装

  - メインループでエンコーダー位置監視を追加
  - 現在のゲームを一時停止してゲーム選択モードに移行する enter_selection_mode()メソッドを実装
  - ゲーム選択モード用の 7 セグメントディスプレイ表示形式（--XX--形式）を追加
  - _Requirements: 1.1, 1.2, 1.3, 2.1, 2.2, 2.3_

- [x] 3. エンコーダー回転によるゲーム番号選択機能を実装

  - ゲームインデックスの循環処理を行う handle_encoder_rotation()メソッドを追加
  - 利用可能なゲーム間の循環ナビゲーション（最初から最後、最後から最初）を実装
  - 選択ゲーム変更時の 7 セグメントディスプレイ更新
  - _Requirements: 2.4, 5.1, 5.2, 5.3, 5.4_

- [x] 4. btn_a によるゲーム変更機能を実装

  - 選択されたゲームに切り替える change_game()メソッドを追加
  - 新しいゲームのインスタンス作成と初期化を実装
  - 通常のゲームモードに戻る exit_selection_mode()メソッドを追加
  - _Requirements: 3.1, 3.2, 3.3, 3.4_

- [x] 5. btn_b による選択キャンセル機能を実装

  - 変更せずに前のゲームに戻る cancel_selection()メソッドを追加
  - 一時停止したゲームを継続するゲーム再開機能を実装
  - 前の 7 セグメントディスプレイ状態を復元
  - _Requirements: 4.1, 4.2, 4.3, 4.4_

- [x] 6. 一時停止・再開機能のための Game インターフェース拡張

  - Game ベースクラスに pause()と resume()メソッドを追加
  - 既存ゲームでのデフォルトの一時停止・再開動作を実装
  - 一時停止中のゲーム状態保持を確保
  - _Requirements: 6.2, 6.3, 6.4_

- [x] 7. GameSelector をメインゲームループに統合

  - 直接的なゲーム管理の代わりに GameSelector を使用するよう main()関数を修正
  - 通常モードと選択モードの両方を処理するようゲームループを更新
  - 適切な状態管理とモード切り替えを確保
  - _Requirements: 6.1, 6.2_

- [x] 8. エラーハンドリングとエッジケース管理を追加

  - エラー回復機能付きの安全なエンコーダー読み取りを実装
  - ゲーム選択の境界チェックを追加
  - ゲーム初期化失敗時の適切な処理
  - _Requirements: 5.1, 5.2, 5.3, 5.4_
