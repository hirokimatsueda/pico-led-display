# 要件書

## 概要

Raspberry Pi Pico 2 と LED マトリクス（8x8）を使用したブロック崩しゲームの実装。プレイヤーは 2 つのボタンでパドルを操作し、オレンジ色のボールでブロックを破壊するクラシックなアーケードゲームです。

## 要件

### 要件 1

**ユーザーストーリー:** ゲームプレイヤーとして、2 つのボタンでパドルを左右に操作したい。これにより、ボールを跳ね返してブロックを破壊できるようになる。

#### 受け入れ基準

1. WHEN ボタン A が押されたとき THEN パドルは左に 1 ピクセル移動する SHALL
2. WHEN ボタン B が押されたとき THEN パドルは右に 1 ピクセル移動する SHALL
3. WHEN パドルが画面左端にあるとき AND ボタン A が押されたとき THEN パドルは移動しない SHALL
4. WHEN パドルが画面右端にあるとき AND ボタン B が押されたとき THEN パドルは移動しない SHALL
5. パドルは緑色の 3 ドット（横一列）で表示される SHALL

### 要件 2

**ユーザーストーリー:** ゲームプレイヤーとして、オレンジ色のボールが画面内で跳ね回る様子を見たい。これにより、ゲームの動的な要素を楽しめるようになる。

#### 受け入れ基準

1. ボールはオレンジ色の 1 ドットで表示される SHALL
2. ボールは一定の速度で移動する SHALL
3. WHEN ボールが左右の壁に当たったとき THEN 水平方向の速度が反転する SHALL
4. WHEN ボールが上の壁に当たったとき THEN 垂直方向の速度が反転する SHALL
5. WHEN ボールがパドルに当たったとき THEN 垂直方向の速度が反転する SHALL
6. WHEN ボールが画面下端に到達したとき THEN ゲームオーバーになる SHALL

### 要件 3

**ユーザーストーリー:** ゲームプレイヤーとして、破壊可能なブロックが画面上部に配置されているのを見たい。これにより、ゲームの目標が明確になる。

#### 受け入れ基準

1. ブロックは画面上部 3 行に配置される SHALL
2. 各ブロックは 1 ドットで表示される SHALL
3. ブロックは赤色で表示される SHALL
4. WHEN ボールがブロックに当たったとき THEN そのブロックは消える SHALL
5. WHEN ボールがブロックに当たったとき THEN ボールの垂直方向の速度が反転する SHALL
6. 初期状態では 24 個のブロック（8 列 ×3 行）が配置される SHALL

### 要件 4

**ユーザーストーリー:** ゲームプレイヤーとして、ゲームの開始、進行、終了の状態を理解したい。これにより、ゲームの流れを把握できるようになる。

#### 受け入れ基準

1. ゲーム開始時にボールはパドルの上に配置される SHALL
2. WHEN 全てのブロックが破壊されたとき THEN ゲームクリアになる SHALL
3. WHEN ボールが画面下端に到達したとき THEN ゲームオーバーになる SHALL
4. WHEN ゲームオーバーまたはクリア時 THEN 画面に結果を表示する SHALL
5. WHEN ゲーム終了後に両方のボタンが同時に押されたとき THEN ゲームが再開始される SHALL

### 要件 5

**ユーザーストーリー:** ゲームプレイヤーとして、スコアや残りブロック数を確認したい。これにより、ゲームの進捗を把握できるようになる。

#### 受け入れ基準

1. 7 セグメントディスプレイに破壊したブロック数が表示される SHALL
2. WHEN ブロックが破壊されたとき THEN スコアが 1 増加する SHALL
3. スコアはリアルタイムで更新される SHALL
4. WHEN ゲーム終了時 THEN 最終スコアが表示される SHALL

### 要件 6

**ユーザーストーリー:** ゲームプレイヤーとして、滑らかで快適なゲーム体験を得たい。これにより、ちらつきのない安定したゲームプレイを楽しめるようになる。

#### 受け入れ基準

1. WHEN ゲーム要素の位置が変化したとき THEN 画面を更新する SHALL
2. WHEN ゲーム要素の位置が変化していないとき THEN 画面更新を行わない SHALL
3. 画面のちらつきを最小限に抑える SHALL
4. フレームレートは安定している SHALL
5. ボタン入力に対する応答は即座に反映される SHALL

### 要件 7

**ユーザーストーリー:** ゲーム開発者として、既存のゲームシステムと統合可能な実装にしたい。これにより、プロジェクトの一貫性を保てるようになる。

#### 受け入れ基準

1. BreakoutGame クラスは Game クラスを継承する SHALL
2. initialize()、update()、finalize()メソッドを実装する SHALL
3. DeviceManager を通じてハードウェアにアクセスする SHALL
4. 既存のゲームと同じファイル構造に従う SHALL
5. 既存のコーディング規約に従う SHALL
